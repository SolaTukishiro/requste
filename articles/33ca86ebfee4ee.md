---
title: "Laravelで案件一覧・詳細ページを作りながら、EloquentリレーションとBladeの考え方を理解する"
emoji: "📘"
type: "tech"
topics: ["Laravel", "Blade", "Eloquent", "個人開発", "初心者"]
published: true
---
## はじめに
Laravelで個人開発を進める中で、  
今回は 「案件一覧ページ」と「案件詳細ページ」 を実装しました。  

CRUDで言うと Read（一覧・詳細） にあたる部分ですが、  

- なぜ $request->client->name で名前が取れるのか？
- id付きURLはどうやって扱うのか？
- Bladeの@foreachはどう考えればいいのか？

など、初学者が「なんとなく書いてしまいがち」な部分に  
実は大事な考え方が詰まっていたので、整理してまとめます。

## 今回作ったもの
今回実装したのは以下の機能です。

- 案件一覧ページ
- 案件詳細ページ（URLにidを含める）
- 案件の投稿者（クライアント名）を表示

画面としては、  
「案件カードが並んでいて、クリックすると詳細に飛ぶ」  
よくあるマッチングサービスの形です。  

### 案件一覧ページの考え方

**Controllerでやっていること**

一覧ページでControllerがやることは、とてもシンプルです。

- 案件を複数件取得する
- Viewに渡す

ここで大事なのは  
**「Controllerは表示を作らない」**  
という意識です。  

Controllerはあくまで  
**データを集めて、Viewに渡すだけ**

### Bladeでの@foreachの考え方

Bladeでよく出てくるのがこれ。
```md
@foreach($requests as $request)
```
最初は
「foreachってなんで2つ同じ名前っぽいの？」  
となりがちですが、考え方はシンプルです。
- $requests：複数の案件（配列）
- $request：その中の1件  

つまり  
**「たくさんの案件を、1件ずつ取り出して表示している」**  
だけです。  

### 裏側で起きていること  
ポイントは Eloquentのリレーション です。  
Requestモデルにこう書いてありました。
```php
public function client()
{
    return $this->belongsTo(User::class, 'client_id');
}
```
これは日本語にすると、
```md
「この案件は、1人のユーザー（クライアント）に属している」
```
という宣言です。  

この宣言があるから、  
- $request（案件）
- → client（投稿者）
- → name（名前）

という オブジェクトのつながり でアクセスできるようになります。

### 初学者向けの考え方
データベースを意識すると混乱しやすいので、  
最初はこう考えるのがおすすめです。  
```md
案件 → 投稿者 → 名前
```
Laravelが裏でSQLを発行してくれているだけで、  
書いているコードは 「人間が読める形」 になっています。  

### 案件詳細ページとid付きURL
**URLにidを含める**  
詳細ページでは、どの案件を見るかをURLで指定します。

```md
/requests/3
```

この「3」が案件のidです。  

Laravelでは、

- URLに含まれるid
- Controllerの引数

が自動的につながります。

なぜこれが便利なのか  

- 一覧ページ → 詳細ページ
- 「どの案件か」をURLで明確にできる
- ページをリロードしても同じ内容が見られる

Webアプリでは 「状態をURLで表す」 のがとても重要です。

## 今回学んだことまとめ

今回の実装で理解できたことは以下です。

- Controllerはデータを集める役割
- Bladeは「表示」に集中する
- リレーションを書くと、モデル同士が自然につながる
- $request->client->name は魔法ではない
- id付きURLは「どのデータか」を表す手段

## おわりに

一覧・詳細ページは地味に見えますが、

- MVCの役割分担
- Eloquentの考え方
- WebらしいURL設計

が一気に詰まった、とても大事な部分でした。

「なんとなく動いた」ではなく  
「なぜこれで動くのか」 を理解できると、  
次の機能追加が一気に楽になります。  


## 次にやること
MVP フェーズ1の予定
```md
・応募・受注
・状態管理（受付中 / 終了）
```

あたりに進む予定です。  
同じように個人開発している方の参考になれば嬉しいです 🚀